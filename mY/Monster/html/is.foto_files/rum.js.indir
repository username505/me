(function(u){if(!_uptime_rum2||!_uptime_rum2.hasOwnProperty("uuid")){console.warn("You are missing _uptime_rum2.uuid property which needs to be global.");return}const c=35e3,v=18e5;var f=!1,m=0,o=0,s=0,_=0,b=_uptime_rum2.extra||[],M=_uptime_rum2.ajax===void 0?!1:!_uptime_rum2.ajax;function l(e){var t={},r=["redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","domInteractive","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectCount"];for(let n=0;n<r.length;n++){const i=r[n],a=e[i];a>0?t[i]=Math.round(a-e.startTime):e.entryType==="navigation"&&document.readyState!=="complete"?t[i]=c:t[i]=0}r=["duration","transferSize","encodedBodySize","decodedBodySize"];for(let n=0;n<r.length;n++)t[r[n]]=e[r[n]];return t}function g(e){return e.transferSize>0?!1:e.decodedBodySize>0?!0:e.duration<30}function R(){var e=u.performance||u.webkitPerformance||u.msPerformance||u.mozPerformance;if(e===void 0)return!1;const t=e.getEntriesByType("navigation")[0];var r=l(t);return r||!1}function P(e){var t=null,r=u.performance.getEntriesByType("resource");for(let n=r.length-1;n>=0;n--){const i=r[n];if(!(["xmlhttprequest","fetch"].indexOf(i.initiatorType)===-1||e!==void 0&&i.name!==e)){t=l(i),r.length>=150&&u.performance.clearResourceTimings();break}}return t}function A(){var e=u.performance.getEntriesByType("paint"),t={firstPaint:0,firstContentfulPaint:0};for(let r=0;r<e.length;r++){const n=e[r];n.name==="first-paint"?t.firstPaint=Math.round(n.startTime):n.name==="first-contentful-paint"&&(t.firstContentfulPaint=Math.round(n.startTime))}return t}function y(){var e=u.sessionStorage,t=new Date,r=_uptime_rum2.sessionTimeout||v;return e?((!e._uptime_rum2_sid_time||t.getTime()-e._uptime_rum2_sid_time>r||t.getTime()-e._uptime_rum2_sid_start>864e5)&&(e._uptime_rum2_sid_start=t.getTime(),e._uptime_rum2_sid=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),_uptime_rum2.debug&&console.debug("New session ID",e._uptime_rum2_sid)),e._uptime_rum2_sid_time=t.getTime(),parseInt(e._uptime_rum2_sid,10)):0}function x(e,t){var r=new XMLHttpRequest;return r.withCredentials!==void 0?r.open(e,t,!0):typeof XDomainRequest!="undefined"?(r=new XDomainRequest,r.open(e,t)):r=null,r}function U(){u.setTimeout(h,1200),f=!1,s=0,_=0,m=new Date,s=m,_uptime_rum2.debug&&console.debug("RUM: Starting TTI tracking",m)}function h(){var e=new Date;o===0&&e-s>=1200&&document.readyState==="complete"||_>=c?L():(_+=1200,u.setTimeout(h,1200))}function d(e){e.uuid=_uptime_rum2.uuid,e.sid=y(),e.isJSError===void 0&&(e.isJSError=_uptime_rum2.reportState.isJSError),e.isHTTPError===void 0&&(e.isHTTPError=_uptime_rum2.reportState.isHTTPError),e.status===void 0&&(e.status=_uptime_rum2.reportState.status),e.ua===void 0&&(e.ua=_uptime_rum2.reportState.ua);var t=x("POST",_uptime_rum2.url);return t?(t.onload=function(){_uptime_rum2.debug&&console.debug("RUM: Collector response",t.response)},t.send(JSON.stringify(e)),!0):!1}function L(){if(_uptime_rum2.debug&&console.debug("RUM: Sending MainPage event"),f)return!1;try{var e=R(),t=A(),r=e.domContentLoadedEventEnd,n=r+(s-m);n=Math.max(n,t.firstContentfulPaint,t.firstPaint);var i=Math.max(n,e.loadEventEnd);if(_uptime_rum2.errors.length>0&&(_uptime_rum2.reportState.isJSError=!0),e){var a={URL:u.location.href,title:document.title,isAjax:!1,performance:{navigation:e,paint:t,extra:{tti:n,pageLoad:i}}};g(e)||d(a)}else console.error("RUM: No timing data available");return _uptime_rum2.errors.slice(0,0),f=!0,!0}catch(p){return _uptime_rum2.debug&&console.error("RUM: Error sending RUM performance data",p),!1}}function S(e,t,r){if(M){_uptime_rum2.debug&&console.debug("RUM: Skipping sending AJAX event because AJAX is disabled by config");return}_uptime_rum2.debug&&console.debug("RUM: Sending AJAX event");var n=!1,i=!0;(t===0||t>=200&&t<400)&&(i=!1),_uptime_rum2.errors.length>0&&_uptime_rum2.errors[_uptime_rum2.errors.length-1].t>r&&(n=!0);var a=P(e);if(a==null){_uptime_rum2.debug&&console.debug("RUM: AJAX metrics not found for URL ",e);return}var p={URL:e,isAjax:!0,isJSError:n,isHTTPError:i,status:t,mainURL:u.location.href,performance:{navigation:a}};g(a)||d(p)}function D(){if(_uptime_rum2.reportState={isJSError:!1,isHTTPError:!1,status:200,ua:u.navigator.userAgent},_uptime_rum2.override!==void 0)for(const[e,t]of Object.entries(_uptime_rum2.override))_uptime_rum2.reportState[e]=t}function T(e){if(!e.startsWith("http"))return!0;var t=new URL(e);return!(!t.hostname.endsWith(document.location.hostname)&&b.indexOf(t.hostname)===-1)}D(),_uptime_rum2.sendPayload=d,XMLHttpRequest.prototype.realOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t){const r=t.toString();return r.startsWith(_uptime_rum2.url)||!T(r)?this.realOpen.apply(this,arguments):(o++,_uptime_rum2.debug&&console.debug("RUM: AJAX started ",r,new Date),this.addEventListener("loadend",function(){o--,s=new Date,_uptime_rum2.reportState.isHTTPError||(_uptime_rum2.reportState.status=this.status,_uptime_rum2.reportState.isHTTPError=!(this.status===0||this.status>=200&&this.status<400)),_uptime_rum2.debug&&console.debug("RUM: AJAX ready",this.responseURL,this.status,new Date),u.setTimeout(S,1200,this.responseURL,this.status)},!1),this.realOpen.apply(this,arguments))};const E=u.fetch;u.fetch=function(){const t=arguments[0].toString();return t.startsWith(_uptime_rum2.url)||!T(t)?E.apply(this,arguments):(o++,_uptime_rum2.debug&&console.debug("RUM: Fetch started ",t,new Date),new Promise((r,n)=>{E.apply(this,arguments).then(i=>{o--,s=new Date,_uptime_rum2.reportState.isHTTPError=i.ok,_uptime_rum2.reportState.status=i.status,_uptime_rum2.debug&&console.debug("RUM: Fetch ready",i.url,i.status,new Date),u.setTimeout(S,1200,i.url,i.status,s),r(i)}).catch(i=>{o--,n(i)})}))},u.addEventListener("unhandledrejection",function(e){u._uptime_rum2.errors.push({t:new Date,err:e})}),U()})(window);
//# sourceMappingURL=rum.js.map
